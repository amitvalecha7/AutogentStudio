{% extends "base.html" %}

{% block title %}Chat Settings - Autogent Studio{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <div class="d-flex align-items-center mb-4">
                <i class="fas fa-cog fa-2x text-primary me-3"></i>
                <h2 class="mb-0">Chat Settings</h2>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Default Chat Configuration</h5>
                </div>
                <div class="card-body">
                    <form id="chatSettingsForm">
                        <!-- Default Model -->
                        <div class="mb-4">
                            <label for="defaultModel" class="form-label">Default AI Model</label>
                            <select class="form-select" id="defaultModel">
                                <option value="openai:gpt-4o">GPT-4o (OpenAI)</option>
                                <option value="anthropic:claude-sonnet-4-20250514">Claude Sonnet 4 (Anthropic)</option>
                                <option value="openai:gpt-3.5-turbo">GPT-3.5 Turbo (OpenAI)</option>
                                <option value="google:gemini-pro">Gemini Pro (Google)</option>
                            </select>
                            <div class="form-text">Choose your preferred AI model for new conversations</div>
                        </div>
                        
                        <!-- Temperature -->
                        <div class="mb-4">
                            <label for="temperature" class="form-label">
                                Temperature: <span id="temperatureValue">0.7</span>
                            </label>
                            <input type="range" class="form-range" id="temperature" 
                                   min="0" max="2" step="0.1" value="0.7">
                            <div class="d-flex justify-content-between">
                                <small class="text-muted">Focused</small>
                                <small class="text-muted">Creative</small>
                            </div>
                            <div class="form-text">Controls the randomness of AI responses</div>
                        </div>
                        
                        <!-- Max Tokens -->
                        <div class="mb-4">
                            <label for="maxTokens" class="form-label">Max Response Length</label>
                            <select class="form-select" id="maxTokens">
                                <option value="1000">Short (1000 tokens)</option>
                                <option value="2000" selected>Medium (2000 tokens)</option>
                                <option value="4000">Long (4000 tokens)</option>
                                <option value="8000">Very Long (8000 tokens)</option>
                            </select>
                            <div class="form-text">Maximum length of AI responses</div>
                        </div>
                        
                        <!-- System Prompt -->
                        <div class="mb-4">
                            <label for="systemPrompt" class="form-label">Default System Prompt</label>
                            <textarea class="form-control" id="systemPrompt" rows="4" 
                                      placeholder="You are a helpful AI assistant...">You are Autogent Studio AI, an advanced AI assistant that helps users with various tasks including coding, analysis, creativity, and problem-solving. Be helpful, accurate, and professional in your responses.</textarea>
                            <div class="form-text">Sets the AI's behavior and personality</div>
                        </div>
                        
                        <!-- Chat Features -->
                        <div class="mb-4">
                            <label class="form-label">Chat Features</label>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="enableStreaming" checked>
                                <label class="form-check-label" for="enableStreaming">
                                    Enable streaming responses
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="enableMarkdown" checked>
                                <label class="form-check-label" for="enableMarkdown">
                                    Render markdown formatting
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="enableCodeHighlight" checked>
                                <label class="form-check-label" for="enableCodeHighlight">
                                    Syntax highlighting for code
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="enableSounds">
                                <label class="form-check-label" for="enableSounds">
                                    Enable notification sounds
                                </label>
                            </div>
                        </div>
                        
                        <!-- Memory Settings -->
                        <div class="mb-4">
                            <label for="contextWindow" class="form-label">Context Memory</label>
                            <select class="form-select" id="contextWindow">
                                <option value="10">Remember last 10 messages</option>
                                <option value="20" selected>Remember last 20 messages</option>
                                <option value="50">Remember last 50 messages</option>
                                <option value="100">Remember last 100 messages</option>
                            </select>
                            <div class="form-text">How many previous messages to keep in context</div>
                        </div>
                        
                        <!-- Safety Settings -->
                        <div class="mb-4">
                            <label class="form-label">Safety & Moderation</label>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="enableModeration" checked>
                                <label class="form-check-label" for="enableModeration">
                                    Enable content moderation
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="enableSafetyFilter" checked>
                                <label class="form-check-label" for="enableSafetyFilter">
                                    Apply AI safety filters
                                </label>
                            </div>
                            <div class="form-text">Helps ensure safe and appropriate AI responses</div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save me-2"></i>Save Settings
                            </button>
                            <button type="button" class="btn btn-secondary" id="resetBtn">
                                <i class="fas fa-undo me-2"></i>Reset to Defaults
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Advanced Settings -->
            <div class="card mt-4">
                <div class="card-header">
                    <h5 class="mb-0">Advanced Configuration</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Quantum-Enhanced Chat</h6>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="enableQuantumChat">
                                <label class="form-check-label" for="enableQuantumChat">
                                    Enable quantum-enhanced responses
                                </label>
                            </div>
                            <div class="form-text mb-3">Use quantum algorithms for optimization</div>
                        </div>
                        
                        <div class="col-md-6">
                            <h6>Federated Learning</h6>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="enableFederatedChat">
                                <label class="form-check-label" for="enableFederatedChat">
                                    Enable federated learning insights
                                </label>
                            </div>
                            <div class="form-text mb-3">Privacy-preserving model improvements</div>
                        </div>
                        
                        <div class="col-md-6">
                            <h6>Neuromorphic Processing</h6>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="enableNeuromorphicChat">
                                <label class="form-check-label" for="enableNeuromorphicChat">
                                    Enable neuromorphic acceleration
                                </label>
                            </div>
                            <div class="form-text mb-3">Ultra-low latency responses</div>
                        </div>
                        
                        <div class="col-md-6">
                            <h6>AI Safety Monitoring</h6>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="enableRealTimeSafety" checked>
                                <label class="form-check-label" for="enableRealTimeSafety">
                                    Real-time safety monitoring
                                </label>
                            </div>
                            <div class="form-text mb-3">Continuous alignment verification</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const temperatureSlider = document.getElementById('temperature');
    const temperatureValue = document.getElementById('temperatureValue');
    const chatSettingsForm = document.getElementById('chatSettingsForm');
    const resetBtn = document.getElementById('resetBtn');
    
    // Update temperature display
    temperatureSlider.addEventListener('input', function() {
        temperatureValue.textContent = this.value;
    });
    
    // Handle form submission
    chatSettingsForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const settings = {
            defaultModel: document.getElementById('defaultModel').value,
            temperature: parseFloat(document.getElementById('temperature').value),
            maxTokens: parseInt(document.getElementById('maxTokens').value),
            systemPrompt: document.getElementById('systemPrompt').value,
            enableStreaming: document.getElementById('enableStreaming').checked,
            enableMarkdown: document.getElementById('enableMarkdown').checked,
            enableCodeHighlight: document.getElementById('enableCodeHighlight').checked,
            enableSounds: document.getElementById('enableSounds').checked,
            contextWindow: parseInt(document.getElementById('contextWindow').value),
            enableModeration: document.getElementById('enableModeration').checked,
            enableSafetyFilter: document.getElementById('enableSafetyFilter').checked,
            enableQuantumChat: document.getElementById('enableQuantumChat').checked,
            enableFederatedChat: document.getElementById('enableFederatedChat').checked,
            enableNeuromorphicChat: document.getElementById('enableNeuromorphicChat').checked,
            enableRealTimeSafety: document.getElementById('enableRealTimeSafety').checked
        };
        
        // Save settings to localStorage
        localStorage.setItem('chatSettings', JSON.stringify(settings));
        
        // Show success message
        const alert = document.createElement('div');
        alert.className = 'alert alert-success alert-dismissible fade show';
        alert.innerHTML = `
            <i class="fas fa-check-circle me-2"></i>Chat settings saved successfully!
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        `;
        
        chatSettingsForm.insertBefore(alert, chatSettingsForm.firstChild);
        
        // Auto-hide after 3 seconds
        setTimeout(() => {
            alert.remove();
        }, 3000);
    });
    
    // Reset to defaults
    resetBtn.addEventListener('click', function() {
        if (confirm('Are you sure you want to reset all settings to defaults?')) {
            // Reset form to default values
            document.getElementById('defaultModel').value = 'openai:gpt-4o';
            document.getElementById('temperature').value = '0.7';
            temperatureValue.textContent = '0.7';
            document.getElementById('maxTokens').value = '2000';
            document.getElementById('systemPrompt').value = 'You are Autogent Studio AI, an advanced AI assistant that helps users with various tasks including coding, analysis, creativity, and problem-solving. Be helpful, accurate, and professional in your responses.';
            document.getElementById('enableStreaming').checked = true;
            document.getElementById('enableMarkdown').checked = true;
            document.getElementById('enableCodeHighlight').checked = true;
            document.getElementById('enableSounds').checked = false;
            document.getElementById('contextWindow').value = '20';
            document.getElementById('enableModeration').checked = true;
            document.getElementById('enableSafetyFilter').checked = true;
            document.getElementById('enableQuantumChat').checked = false;
            document.getElementById('enableFederatedChat').checked = false;
            document.getElementById('enableNeuromorphicChat').checked = false;
            document.getElementById('enableRealTimeSafety').checked = true;
            
            // Clear localStorage
            localStorage.removeItem('chatSettings');
            
            // Show reset message
            const alert = document.createElement('div');
            alert.className = 'alert alert-info alert-dismissible fade show';
            alert.innerHTML = `
                <i class="fas fa-info-circle me-2"></i>Settings reset to defaults
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            
            chatSettingsForm.insertBefore(alert, chatSettingsForm.firstChild);
            
            setTimeout(() => {
                alert.remove();
            }, 3000);
        }
    });
    
    // Load saved settings
    const savedSettings = localStorage.getItem('chatSettings');
    if (savedSettings) {
        try {
            const settings = JSON.parse(savedSettings);
            
            document.getElementById('defaultModel').value = settings.defaultModel || 'openai:gpt-4o';
            document.getElementById('temperature').value = settings.temperature || 0.7;
            temperatureValue.textContent = settings.temperature || 0.7;
            document.getElementById('maxTokens').value = settings.maxTokens || 2000;
            document.getElementById('systemPrompt').value = settings.systemPrompt || '';
            document.getElementById('enableStreaming').checked = settings.enableStreaming !== false;
            document.getElementById('enableMarkdown').checked = settings.enableMarkdown !== false;
            document.getElementById('enableCodeHighlight').checked = settings.enableCodeHighlight !== false;
            document.getElementById('enableSounds').checked = settings.enableSounds || false;
            document.getElementById('contextWindow').value = settings.contextWindow || 20;
            document.getElementById('enableModeration').checked = settings.enableModeration !== false;
            document.getElementById('enableSafetyFilter').checked = settings.enableSafetyFilter !== false;
            document.getElementById('enableQuantumChat').checked = settings.enableQuantumChat || false;
            document.getElementById('enableFederatedChat').checked = settings.enableFederatedChat || false;
            document.getElementById('enableNeuromorphicChat').checked = settings.enableNeuromorphicChat || false;
            document.getElementById('enableRealTimeSafety').checked = settings.enableRealTimeSafety !== false;
        } catch (e) {
            console.error('Error loading saved settings:', e);
        }
    }
});
</script>
{% endblock %}
