{% extends "base.html" %}

{% block title %}Settings - Autogent Studio{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row">
        <div class="col-12">
            <h1 class="h2 mb-4">
                <i class="fas fa-cog me-2"></i>
                Settings
            </h1>
        </div>
    </div>

    <div class="row">
        <!-- Sidebar Navigation -->
        <div class="col-md-3">
            <div class="card bg-dark">
                <div class="card-body p-0">
                    <div class="list-group list-group-flush">
                        <a href="#profile" class="list-group-item list-group-item-action bg-dark text-light border-0 active" data-bs-toggle="tab">
                            <i class="fas fa-user me-2"></i>Profile
                        </a>
                        <a href="#ai-models" class="list-group-item list-group-item-action bg-dark text-light border-0" data-bs-toggle="tab">
                            <i class="fas fa-robot me-2"></i>AI Models
                        </a>
                        <a href="#api-keys" class="list-group-item list-group-item-action bg-dark text-light border-0" data-bs-toggle="tab">
                            <i class="fas fa-key me-2"></i>API Keys
                        </a>
                        <a href="#quantum" class="list-group-item list-group-item-action bg-dark text-light border-0" data-bs-toggle="tab">
                            <i class="fas fa-atom me-2"></i>Quantum Computing
                        </a>
                        <a href="#neuromorphic" class="list-group-item list-group-item-action bg-dark text-light border-0" data-bs-toggle="tab">
                            <i class="fas fa-microchip me-2"></i>Neuromorphic AI
                        </a>
                        <a href="#federated" class="list-group-item list-group-item-action bg-dark text-light border-0" data-bs-toggle="tab">
                            <i class="fas fa-network-wired me-2"></i>Federated Learning
                        </a>
                        <a href="#safety" class="list-group-item list-group-item-action bg-dark text-light border-0" data-bs-toggle="tab">
                            <i class="fas fa-shield-alt me-2"></i>Safety Protocols
                        </a>
                        <a href="#blockchain" class="list-group-item list-group-item-action bg-dark text-light border-0" data-bs-toggle="tab">
                            <i class="fas fa-cube me-2"></i>Blockchain
                        </a>
                        <a href="#privacy" class="list-group-item list-group-item-action bg-dark text-light border-0" data-bs-toggle="tab">
                            <i class="fas fa-lock me-2"></i>Privacy & Security
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-md-9">
            <div class="tab-content">
                <!-- Profile Settings -->
                <div class="tab-pane fade show active" id="profile">
                    <div class="card bg-dark">
                        <div class="card-header">
                            <h4><i class="fas fa-user me-2"></i>Profile Information</h4>
                        </div>
                        <div class="card-body">
                            <form id="profileForm">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="firstName" class="form-label">First Name</label>
                                            <input type="text" class="form-control bg-secondary text-light" id="firstName" value="{{ current_user.first_name or '' }}">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="lastName" class="form-label">Last Name</label>
                                            <input type="text" class="form-control bg-secondary text-light" id="lastName" value="{{ current_user.last_name or '' }}">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="username" class="form-label">Username</label>
                                    <input type="text" class="form-control bg-secondary text-light" id="username" value="{{ current_user.username }}">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="email" class="form-label">Email</label>
                                    <input type="email" class="form-control bg-secondary text-light" id="email" value="{{ current_user.email }}">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="role" class="form-label">Role</label>
                                    <select class="form-select bg-secondary text-light" id="role">
                                        <option value="user" {{ 'selected' if current_user.role == 'user' else '' }}>User</option>
                                        <option value="researcher" {{ 'selected' if current_user.role == 'researcher' else '' }}>Researcher</option>
                                        <option value="admin" {{ 'selected' if current_user.role == 'admin' else '' }}>Admin</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="safetyLevel" class="form-label">Safety Clearance</label>
                                    <select class="form-select bg-secondary text-light" id="safetyLevel">
                                        <option value="basic" {{ 'selected' if current_user.safety_clearance == 'basic' else '' }}>Basic</option>
                                        <option value="advanced" {{ 'selected' if current_user.safety_clearance == 'advanced' else '' }}>Advanced</option>
                                        <option value="quantum" {{ 'selected' if current_user.safety_clearance == 'quantum' else '' }}>Quantum</option>
                                    </select>
                                </div>
                                
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save me-2"></i>Save Changes
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- AI Models Settings -->
                <div class="tab-pane fade" id="ai-models">
                    <div class="card bg-dark">
                        <div class="card-header">
                            <h4><i class="fas fa-robot me-2"></i>AI Model Configuration</h4>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h5>OpenAI Models</h5>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="gpt4o" checked>
                                        <label class="form-check-label" for="gpt4o">GPT-4o</label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="gpt4mini">
                                        <label class="form-check-label" for="gpt4mini">GPT-4o Mini</label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="o1preview">
                                        <label class="form-check-label" for="o1preview">o1 Preview</label>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <h5>Anthropic Models</h5>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="claude4">
                                        <label class="form-check-label" for="claude4">Claude 4 Sonnet</label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="claude37">
                                        <label class="form-check-label" for="claude37">Claude 3.7 Sonnet</label>
                                    </div>
                                </div>
                            </div>
                            
                            <hr>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <h5>Local Models</h5>
                                    <div class="mb-3">
                                        <label for="ollamaUrl" class="form-label">Ollama Server URL</label>
                                        <input type="url" class="form-control bg-secondary text-light" id="ollamaUrl" value="http://localhost:11434">
                                    </div>
                                    <div class="mb-3">
                                        <label for="huggingfaceUrl" class="form-label">Huggingface Server URL</label>
                                        <input type="url" class="form-control bg-secondary text-light" id="huggingfaceUrl" value="http://localhost:8080">
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <h5>Model Defaults</h5>
                                    <div class="mb-3">
                                        <label for="defaultModel" class="form-label">Default Model</label>
                                        <select class="form-select bg-secondary text-light" id="defaultModel">
                                            <option value="gpt-4o">GPT-4o</option>
                                            <option value="claude-sonnet-4-20250514">Claude 4 Sonnet</option>
                                            <option value="llama2">Llama 2 (Local)</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="defaultTemp" class="form-label">Default Temperature</label>
                                        <input type="range" class="form-range" id="defaultTemp" min="0" max="2" step="0.1" value="0.7">
                                        <small class="text-muted">Current: <span id="tempValue">0.7</span></small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- API Keys Settings -->
                <div class="tab-pane fade" id="api-keys">
                    <div class="card bg-dark">
                        <div class="card-header">
                            <h4><i class="fas fa-key me-2"></i>API Key Management</h4>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle me-2"></i>
                                API keys are encrypted and stored securely. Only you can access them.
                            </div>
                            
                            <div id="apiKeysList">
                                <!-- API keys will be loaded here -->
                            </div>
                            
                            <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addApiKeyModal">
                                <i class="fas fa-plus me-2"></i>Add API Key
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Quantum Computing Settings -->
                <div class="tab-pane fade" id="quantum">
                    <div class="card bg-dark">
                        <div class="card-header">
                            <h4><i class="fas fa-atom me-2"></i>Quantum Computing</h4>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h5>Quantum Providers</h5>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="qiskit">
                                        <label class="form-check-label" for="qiskit">IBM Qiskit</label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="cirq">
                                        <label class="form-check-label" for="cirq">Google Cirq</label>
                                    </div>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="braket">
                                        <label class="form-check-label" for="braket">AWS Braket</label>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <h5>Quantum Settings</h5>
                                    <div class="mb-3">
                                        <label for="quantumBackend" class="form-label">Default Backend</label>
                                        <select class="form-select bg-secondary text-light" id="quantumBackend">
                                            <option value="simulator">Quantum Simulator</option>
                                            <option value="real">Real Quantum Computer</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="maxQubits" class="form-label">Max Qubits</label>
                                        <input type="number" class="form-control bg-secondary text-light" id="maxQubits" value="32" min="1" max="1000">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional tabs continue... -->
                <!-- For brevity, I'll show the structure. Each tab follows similar pattern -->
            </div>
        </div>
    </div>
</div>

<!-- Add API Key Modal -->
<div class="modal fade" id="addApiKeyModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content bg-dark">
            <div class="modal-header">
                <h5 class="modal-title">Add API Key</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="addApiKeyForm">
                    <div class="mb-3">
                        <label for="apiProvider" class="form-label">Provider</label>
                        <select class="form-select bg-secondary text-light" id="apiProvider" required>
                            <option value="">Select Provider</option>
                            <option value="openai">OpenAI</option>
                            <option value="anthropic">Anthropic</option>
                            <option value="huggingface">Huggingface</option>
                            <option value="google">Google AI</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="apiKeyName" class="form-label">Key Name</label>
                        <input type="text" class="form-control bg-secondary text-light" id="apiKeyName" required>
                    </div>
                    <div class="mb-3">
                        <label for="apiKeyValue" class="form-label">API Key</label>
                        <input type="password" class="form-control bg-secondary text-light" id="apiKeyValue" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveApiKey">Save Key</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Settings JavaScript
document.addEventListener('DOMContentLoaded', function() {
    // Temperature slider
    const tempSlider = document.getElementById('defaultTemp');
    const tempValue = document.getElementById('tempValue');
    
    if (tempSlider && tempValue) {
        tempSlider.addEventListener('input', function() {
            tempValue.textContent = this.value;
        });
    }
    
    // Profile form submission
    const profileForm = document.getElementById('profileForm');
    if (profileForm) {
        profileForm.addEventListener('submit', function(e) {
            e.preventDefault();
            // Handle profile update
            console.log('Profile update submitted');
        });
    }
    
    // API Key management
    const saveApiKeyBtn = document.getElementById('saveApiKey');
    if (saveApiKeyBtn) {
        saveApiKeyBtn.addEventListener('click', function() {
            // Handle API key saving
            console.log('API key save clicked');
        });
    }
});
</script>
{% endblock %}